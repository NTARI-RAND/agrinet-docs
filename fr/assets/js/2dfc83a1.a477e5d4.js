"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[4005],{8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},9035:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"federation-guide","title":"Federation Deployment & Launch Kit","description":"This launch kit equips Agrinet node operators with everything needed to deploy, federate, and contribute back to the network.","source":"@site/docs/federation-guide.md","sourceDirName":".","slug":"/federation-guide","permalink":"/fr/docs/federation-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/NTARI-RAND/agrinet-docs/docs/federation-guide.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Federation Deployment & Launch Kit","sidebar_position":3},"sidebar":"tutorial","previous":{"title":"Federation Node Onboarding","permalink":"/fr/docs/onboarding"},"next":{"title":"API Testing Playbook","permalink":"/fr/docs/api-testing"}}');var s=i(4848),r=i(8453);const o={title:"Federation Deployment & Launch Kit",sidebar_position:3},d=void 0,l={},a=[{value:"System Requirements",id:"system-requirements",level:2},{value:"Deployment Script",id:"deployment-script",level:2},{value:"Node Onboarding Checklist",id:"node-onboarding-checklist",level:2},{value:"Security Handshake (v1)",id:"security-handshake-v1",level:2},{value:"Compliance Rules",id:"compliance-rules",level:2},{value:"Platform Features",id:"platform-features",level:2},{value:"Federation Status CLI",id:"federation-status-cli",level:2},{value:"Appendix: Node Template",id:"appendix-node-template",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This launch kit equips Agrinet node operators with everything needed to deploy, federate, and contribute back to the network."}),"\n",(0,s.jsx)(n.h2,{id:"system-requirements",children:"System Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ubuntu 20.04+ (x86_64 or ARM)"}),"\n",(0,s.jsx)(n.li,{children:"Node.js v18+"}),"\n",(0,s.jsx)(n.li,{children:"AWS DynamoDB 5+"}),"\n",(0,s.jsx)(n.li,{children:"Git"}),"\n",(0,s.jsx)(n.li,{children:"PM2 or systemd for process management"}),"\n",(0,s.jsx)(n.li,{children:"Optional but recommended: Nginx reverse proxy for TLS termination"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"deployment-script",children:"Deployment Script"}),"\n",(0,s.jsx)(n.p,{children:"Use the following script to bootstrap a production-ready node:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'title="install.sh"',children:"#!/bin/bash\nsudo apt update && sudo apt install -y nodejs npm git dynamodb\n\ngit clone https://github.com/NTARI-RAND/Agrinet.git\ncd Agrinet/backend\n\ncp .env.example .env\nnpm install\n\n# Setup PM2\nnpm install -g pm2\npm run build\npm start\npm save\n"})}),"\n",(0,s.jsx)(n.p,{children:"For automated federation syncs, schedule a cron job:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'*/30 * * * * curl -s "$BACKEND_URL/federation/sync"\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Set ",(0,s.jsx)(n.code,{children:"BACKEND_URL"})," to your deployed backend URL. The cron job keeps your node in sync with the broader federation."]})}),"\n",(0,s.jsx)(n.h2,{id:"node-onboarding-checklist",children:"Node Onboarding Checklist"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Clone the protocol backend."}),"\n",(0,s.jsxs)(n.li,{children:["Configure ",(0,s.jsx)(n.code,{children:".env"})," with ",(0,s.jsx)(n.code,{children:"JWT_SECRET"}),", ",(0,s.jsx)(n.code,{children:"AWS_SECRET"}),", and optional ",(0,s.jsx)(n.code,{children:"STRIPE_KEYS"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Schedule ",(0,s.jsx)(n.code,{children:"federationSyncJob.js"})," with PM2 or cron (",(0,s.jsx)(n.code,{children:"BACKEND_URL"})," must point to your backend)."]}),"\n",(0,s.jsx)(n.li,{children:"Register with peers:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'POST /federation/node/register\n{\n  "nodeUrl": "https://node.example.org",\n  "region": "Pacific NW",\n  "contactEmail": "admin@node.org"\n}\n'})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:"Verify sync status:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /federation/export\nGET /federation/nodes\nGET /logs\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-handshake-v1",children:"Security Handshake (v1)"}),"\n",(0,s.jsx)(n.p,{children:"Every sync exchange includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Node URL with verified TLS"}),"\n",(0,s.jsx)(n.li,{children:"Hash-checked payload (timestamp-based CRDT logic)"}),"\n",(0,s.jsx)(n.li,{children:"Optional: GPG-signed payloads (planned for v2)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Trust model:"})," only synchronize with registered nodes and track reliability with the LBTAS trust layer."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"GET /federation/export\n# Ensure each item includes updatedAt and store the last received hash per node\n"})}),"\n",(0,s.jsx)(n.h2,{id:"compliance-rules",children:"Compliance Rules"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use the transmission string format ",(0,s.jsx)(n.code,{children:"key1/key2/UI_string"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Store user data according to Agrinet key-auth standards."}),"\n",(0,s.jsx)(n.li,{children:"Implement both Open Dialog and Mycelium sync modules."}),"\n",(0,s.jsx)(n.li,{children:"Rate all transactions with the LBTAS scoring model."}),"\n",(0,s.jsx)(n.li,{children:"Honor the GNU GPL v3.0 license for all forks and contributions."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"platform-features",children:"Platform Features"}),"\n",(0,s.jsx)(n.p,{children:"Key modules shipped with the Agrinet backend include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"trendsRoutes.js"})," for AI-enhanced trend analytics."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"depositRoutes.js"})," for wallet management and Stripe integrations."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"agrotourismRoutes.js"})," for event and listing workflows."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"transactionLog.js"})," for auditable activity."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"aiTrendHelper.js"})," for rule-based AI summaries."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"federation-status-cli",children:"Federation Status CLI"}),"\n",(0,s.jsx)(n.p,{children:"Monitor peer health with the bundled CLI:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd frontend\nnode federationStatusCLI.js              # defaults to http://localhost:5000\nBACKEND_URL=https://api.example.com node federationStatusCLI.js\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\ud83c\udf0d Federation Node Status Report\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Node URL                    \u2502 Status     \u2502 Listings  \u2502 Transactions \u2502 Users   \u2502 Last Sync     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 http://node1.example.org    \u2502 \u2705 ONLINE  \u2502 123       \u2502 456          \u2502 10      \u2502 5/20/2025 ... \u2502\n\u2502 http://node2.example.org    \u2502 \u274c OFFLINE \u2502 -         \u2502 -            \u2502 -       \u2502 N/A           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install dependencies if needed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install chalk cli-table3 axios\n"})}),"\n",(0,s.jsx)(n.h2,{id:"appendix-node-template",children:"Appendix: Node Template"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "nodeId": "node-1",\n  "production": { "capabilities": [] },\n  "services": {\n    "educational": [],\n    "socialMedia": [],\n    "extension": [],\n    "financial": {\n      "marketListings": [],\n      "grants": []\n    },\n    "marketing": {\n      "onNetwork": [],\n      "socialMediaSyndication": []\n    },\n    "messaging": {\n      "enabled": false,\n      "levesonRatings": []\n    }\n  },\n  "reputation": { "leveson": 0 },\n  "interoperability": []\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:'You"re now ready to launch your Agrinet node and collaborate with the federation community.'})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);